@PART[ht2_iROSA]
{
	MODULE
	{
		name = ModuleHabTechItem
		description = Solar array upgrade. Can be attached to compatible mounts via inventory. 
		packedVolume = 500
		upgradeName = solarPanel
	}
}

@PART[ht2_SAW_v2]
{
	MODULE
	{
		name = ModuleHabTechSolarPanel
		inventoryName = Roll Out Solar Array
		inventorySize = 400 // packed volume limit
		description = Upgradeable solar array mount. 
		UPGRADES
		{
			name = iROSA_A
			upgradeName = solarPanel
			imageUrl = HabTech2/Icons/solarArray
			transform = iROSA_SAWmount
			MODULE
			{
				name = ModuleDeployableSolarPanel
				resourceName = ElectricCharge
				sunTracking = false
				chargeRate = 35
				retractable = true
				animationName = iROSA_deploy
				raycastTransformName = iROSA_suncatcher
				extendActionName = Extend iROSA
				retractActionName = Retract iROSA
				extendpanelsActionName = Toggle iROSA
				breakName = ht2_iROSA
				pivotName = iROSA_pivot
			}			
		}
	}
}

@PART[ht2_P6_SAW]
{
	MODULE
	{
		name = ModuleHabTechSolarPanel
		inventoryName = Roll Out Solar Array A
		inventorySize = 400 // packed volume limit
		description = Upgradeable solar array mount. 
		UPGRADES
		{
			name = iROSA_A
			upgradeName = solarPanel
			imageUrl = HabTech2/Icons/solarArray
			transform = iROSA_SAWmountA
			MODULE
			{
				name = ModuleDeployableSolarPanel
				resourceName = ElectricCharge
				sunTracking = false
				chargeRate = 35
				retractable = true
				animationName = iROSA_deploy
				raycastTransformName = iROSA_suncatcher
				extendActionName = Extend iROSA A
				retractActionName = Retract iROSA A 
				extendpanelsActionName = Toggle iROSA A
				breakName = iROSA
				pivotName = iROSA_pivot
			}			
		}
	}
	MODULE
	{
		name = ModuleHabTechSolarPanel
		inventoryName = Roll Out Solar Array B
		inventorySize = 400 // packed volume limit
		description = Upgradeable solar array mount. 
		UPGRADES
		{
			name = iROSA_B
			upgradeName = solarPanel
			imageUrl = HabTech2/Icons/solarArray
			transform = iROSA_SAWmountB
			MODULE
			{
				name = ModuleDeployableSolarPanel
				resourceName = ElectricCharge
				sunTracking = false
				chargeRate = 35
				retractable = true
				animationName = iROSA_B_deploy
				raycastTransformName = iROSA_B_suncatcher
				extendActionName = Extend iROSA B
				retractActionName = Retract iROSA B
				extendpanelsActionName = Toggle iROSA B
				breakName = ht2_iROSA_B
				pivotName = iROSA_B_pivot
			}			
		}
	}
}

@PART[ht2_S6_SAW]
{
	MODULE
	{
		name = ModuleHabTechSolarPanel
		inventoryName = Roll Out Solar Array A
		inventorySize = 400 // packed volume limit
		description = Upgradeable solar array mount. 
		UPGRADES
		{
			name = iROSA_A
			upgradeName = solarPanel
			imageUrl = HabTech2/Icons/solarArray
			transform = iROSA_SAWmountA
			MODULE
			{
				name = ModuleDeployableSolarPanel
				resourceName = ElectricCharge
				sunTracking = false
				chargeRate = 35
				retractable = true
				animationName = iROSA_deploy
				raycastTransformName = iROSA_suncatcher
				extendActionName = Extend iROSA A
				retractActionName = Retract iROSA A 
				extendpanelsActionName = Toggle iROSA A
				breakName = iROSA
				pivotName = iROSA_pivot
			}			
		}
	}
	MODULE
	{
		name = ModuleHabTechSolarPanel
		inventoryName = Roll Out Solar Array B
		inventorySize = 400 // packed volume limit
		description = Upgradeable solar array mount. 
		UPGRADES
		{
			name = iROSA_B
			upgradeName = solarPanel
			imageUrl = HabTech2/Icons/solarArray
			transform = iROSA_SAWmountB
			MODULE
			{
				name = ModuleDeployableSolarPanel
				resourceName = ElectricCharge
				sunTracking = false
				chargeRate = 35
				retractable = true
				animationName = iROSA_B_deploy
				raycastTransformName = iROSA_B_suncatcher
				extendActionName = Extend iROSA B
				retractActionName = Retract iROSA B
				extendpanelsActionName = Toggle iROSA B
				breakName = ht2_iROSA_B
				pivotName = iROSA_B_pivot
			}			
		}
	}
}

@PART[ht2_P3_SAW]
{
	MODULE
	{
		name = ModuleHabTechSolarPanel
		inventoryName = Roll Out Solar Array A
		inventorySize = 400 // packed volume limit
		description = Upgradeable solar array mount. 
		UPGRADES
		{
			name = iROSA_A
			upgradeName = solarPanel
			imageUrl = HabTech2/Icons/solarArray
			transform = iROSA_SAWmountA
			MODULE
			{
				name = ModuleDeployableSolarPanel
				resourceName = ElectricCharge
				sunTracking = false
				chargeRate = 35
				retractable = true
				animationName = iROSA_deploy
				raycastTransformName = iROSA_suncatcher
				extendActionName = Extend iROSA A
				retractActionName = Retract iROSA A 
				extendpanelsActionName = Toggle iROSA A
				breakName = iROSA
				pivotName = iROSA_pivot
			}			
		}
	}
	MODULE
	{
		name = ModuleHabTechSolarPanel
		inventoryName = Roll Out Solar Array B
		inventorySize = 400 // packed volume limit
		description = Upgradeable solar array mount. 
		UPGRADES
		{
			name = iROSA_B
			upgradeName = solarPanel
			imageUrl = HabTech2/Icons/solarArray
			transform = iROSA_SAWmountB
			MODULE
			{
				name = ModuleDeployableSolarPanel
				resourceName = ElectricCharge
				sunTracking = false
				chargeRate = 35
				retractable = true
				animationName = iROSA_B_deploy
				raycastTransformName = iROSA_B_suncatcher
				extendActionName = Extend iROSA B
				retractActionName = Retract iROSA B
				extendpanelsActionName = Toggle iROSA B
				breakName = ht2_iROSA_B
				pivotName = iROSA_B_pivot
			}			
		}
	}
}

// PAYLOAD RACKS

@PART[ht2*]:HAS[@MODULE[ModuleHabTechSolarPanel]:HAS[#inventoryName[Utility?Rack]]]
{
	@description ^=:$: \n \n<color=green><b>UTILITY RACK.</b> Place <b>Utility Rack</b> parts inside this part's Utility Rack slots to add utility upgrades.</color> 
	@MODULE:HAS[#inventoryName[Utility?Rack]]
	{
		UPGRADES
		{
			name = empty
			upgradeName = empty
			imageUrl = Squad/PartList/SimpleIcons/R&D_node_icon_generic		
		}
		UPGRADES
		{
			name = empty
			upgradeName = empty
			imageUrl = Squad/PartList/SimpleIcons/R&D_node_icon_generic		
		}
		UPGRADES
		{
			name = empty
			upgradeName = empty
			imageUrl = Squad/PartList/SimpleIcons/R&D_node_icon_generic		
		}
		UPGRADES
		{
			name = probeCore
			upgradeName = probeCore
			MODULE
			{
				name = ModuleCommand
				minimumCrew = 0
				RESOURCE
				{
					name = ElectricCharge
					rate = 0.025
				}
				hasHibernation = True
			}			
		}
		UPGRADES
		{
			name = kerbNet
			upgradeName = kerbNet
			MODULE
			{
				name = ModuleKerbNetAccess
				MinimumFoV = 17
				MaximumFoV = 63
				AnomalyDetection = 0
				DISPLAY_MODES
				{
					Mode = Terrain,#autoLOC_438839 //#autoLOC_438839 = Terrain
					Mode = Biome,#autoLOC_438890 //#autoLOC_438890 = Biome
				}
				REQUIRED_EFFECTS
				{
					Effect = ScienceSkill
				}
			}			
		}
		UPGRADES
		{
			name = XP
			upgradeName = XP
			MODULE
			{
        			name = ModuleExperienceManagement
        			costPerKerbal = 0
			}		
		}
		UPGRADES
		{
			name = radio
			upgradeName = radio
			MODULE
			{
				name = ModuleDataTransmitter
				antennaType = DIRECT
				packetInterval = 0.6
				packetSize = 2
				packetResourceCost = 12.0
				requiredResource = ElectricCharge
				antennaPower = 500000
				antennaCombinable = False
			}		
		}
		UPGRADES
		{
			name = SAS
			upgradeName = SAS
			MODULE
			{
				name = ModuleSAS
				SASServiceLevel = 3
				standalone = true
			}		
		}
		UPGRADES
		{
			name = probeControl
			upgradeName = probeControl
			MODULE
			{
				name = ModuleProbeControlPoint
				minimumCrew = 2
				multiHop = False
			}		
		}
		UPGRADES
		{
			name = robotics
			upgradeName = robotics
			MODULE:NEEDS[EasyRobotics]
			{
				name = ModuleEasyRobotics
			}		
		}
	}
}
@PART[ht2*]:HAS[@MODULE[ModuleHabTechSolarPanel]:HAS[#inventoryName[Science?Rack]]]
{
	@description ^=:$: \n \n<color=#00ffffff><b>LABORATORY RACK.</b> Place <b>Science Rack</b> parts inside this part's Science Rack slots to add science experiments.</color> 
	@MODULE:HAS[#inventoryName[Science?Rack]]
	{
		UPGRADES
		{
			name = empty
			upgradeName = empty
			imageUrl = Squad/PartList/SimpleIcons/R&D_node_icon_advsciencetech		
		}
		UPGRADES
		{
			name = empty
			upgradeName = empty
			imageUrl = Squad/PartList/SimpleIcons/R&D_node_icon_advsciencetech		
		}
		UPGRADES
		{
			name = empty
			upgradeName = empty
			imageUrl = Squad/PartList/SimpleIcons/R&D_node_icon_advsciencetech		
		}
		UPGRADES
		{
			name = centrifuge
			upgradeName = centrifuge
			MODULE
			{
				name = ModuleHabTechSolarPanel
				inventoryName = Scientific Centrifuge
				inventorySize = 30 // packed volume limit, 30 per sample
				upgradeSlots = 1
				description = Centrifuge.
				UPGRADES
				{
					name = empty
					upgradeName = empty
					imageUrl = Squad/PartList/SimpleIcons/R&D_node_icon_metamaterials	
				}
				UPGRADES
				{
					name = mysteryGoo
					upgradeName = mysteryGoo
					MODULE
					{
						name = ModuleScienceExperiment
						experimentID = centrifuge_goo
						experimentActionName = Start Centrifuge Experiment
						resetActionName = Reset Centrifuge Experiment
						useStaging = False
						useActionGroups = True
						hideUIwhenUnavailable = False
						xmitDataScalar = 0.3
						dataIsCollectable = True
						collectActionName = #autoLOC_6004057 //#autoLOC_6004057 = Collect Data
						interactionRange = 1.5
						usageReqMaskInternal = 1
						usageReqMaskExternal = 8
					}
				}
			}		
		}
	}
}


//Adds usage instructions to part descriptions

@PART[ht2_ISPR_U*]
{
	@description ^=:$: \n \n<color=green><b>UTILITY RACK part.</b> Place inside a part's <b>Utility Rack</b> slots to add utility upgrade. </color>
}

@PART[ht2_ISPR_S*]
{
	@description ^=:$: \n \n<color=#00ffffff><b>SCIENCE RACK part.</b> Place inside a part's <b>Science Rack</b> slots to add science experiment. </color>
}

@PART[ht2_sample*]
{
	@description ^=:$: \n \n<color=#ff00ffff><b>SAMPLE CONTAINER part.</b> Place inside a part's <b>Experiment Slot</b> to use in science experiment. </color>
}